import{_ as k,r as x,c,a2 as m,o as l,a as e,t as r,f as C,b as y,d as v,g as S,F as w,e as M,n as _,m as p}from"./index-EFmlQinS.js";const A={name:"IntegrationActionModal",props:{isVisible:{type:Boolean,default:!1},integration:{type:Object,default:()=>({})},actionType:{type:String,default:"connect"}},data(){return{isLoading:!1}},computed:{title(){var i,t,s;return this.actionType==="connect"?`Connect ${(i=this.integration)==null?void 0:i.name}`:this.actionType==="fix"?`Fix Connection: ${(t=this.integration)==null?void 0:t.name}`:`${(s=this.integration)==null?void 0:s.name} Settings`},saveButtonText(){return this.actionType==="connect"?"Connect":this.actionType==="fix"?"Verify Connection":"Save Changes"}},methods:{handleSave(){this.isLoading=!0,setTimeout(()=>{this.isLoading=!1,this.$emit("save")},1500)}}},T={key:0,class:"modal fade show d-block",tabindex:"-1",role:"dialog","aria-labelledby":"integrationModalLabel","aria-hidden":"true",style:{"background-color":"rgba(0,0,0,0.5)"}},I={class:"modal-dialog modal-dialog-centered",role:"document"},B={class:"modal-content radius-16"},L={class:"modal-header border-bottom py-16 px-24"},$={class:"modal-title fw-bold",id:"integrationModalLabel"},V={class:"modal-body p-24"},j={key:0},P={class:"text-secondary-light mb-24"},N={type:"button",class:"btn btn-outline-neutral-200 w-100 radius-8 d-flex align-items-center justify-content-center gap-2 hover-bg-base"},E={key:1},F={class:"alert alert-danger bg-danger-50 text-danger-main border-danger-100 radius-8 mb-24 p-12 d-flex gap-2"},O={class:"text-xs mb-0"},D={type:"button",class:"btn btn-primary-600 w-100 radius-8 d-flex align-items-center justify-content-center gap-2"},K={key:2},R={class:"modal-footer border-top py-16 px-24"},q=["disabled"],z={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"};function G(i,t,s,o,h,u){var a,d,n,f;const b=x("iconify-icon");return s.isVisible?(l(),c("div",T,[e("div",I,[e("div",B,[e("div",L,[e("h5",$,r(u.title),1),e("button",{type:"button",class:"btn-close",onClick:t[0]||(t[0]=g=>i.$emit("close")),"aria-label":"Close"})]),e("div",V,[s.actionType==="connect"?(l(),c("div",j,[e("p",P,"Connect your "+r((a=s.integration)==null?void 0:a.name)+" account to Dentaify.",1),t[3]||(t[3]=C('<div class="mb-16"><label class="form-label fw-semibold text-primary-light text-sm mb-8">API Key / Token</label><input type="text" class="form-control radius-8" placeholder="Enter API Key"></div><div class="d-flex justify-content-center my-3"><span class="text-secondary-light text-xs fw-medium bg-base px-2">OR</span></div>',2)),e("button",N,[y(b,{icon:(d=s.integration)==null?void 0:d.icon,class:"text-xl"},null,8,["icon"]),v(" Sign in with "+r((n=s.integration)==null?void 0:n.name),1)])])):m("",!0),s.actionType==="fix"?(l(),c("div",E,[e("div",F,[y(b,{icon:"solar:danger-circle-bold",class:"text-xl mt-1"}),e("div",null,[t[4]||(t[4]=e("h6",{class:"text-sm fw-bold mb-1"},"Connection Error",-1)),e("p",O,r(((f=s.integration)==null?void 0:f.errorMessage)||"Authentication failed"),1)])]),t[6]||(t[6]=e("p",{class:"text-secondary-light mb-16"},"Please re-authenticate to restore the connection.",-1)),e("button",D,[y(b,{icon:"solar:refresh-circle-bold",class:"text-xl"}),t[5]||(t[5]=v(" Re-Sync Now ",-1))])])):m("",!0),s.actionType==="configure"?(l(),c("div",K,[...t[7]||(t[7]=[e("h6",{class:"text-lg fw-semibold mb-16"},"Sync Settings",-1),e("div",{class:"d-flex align-items-center justify-content-between mb-16"},[e("div",null,[e("h6",{class:"text-sm fw-semibold mb-4"},"Sync Patients"),e("p",{class:"text-xs text-secondary-light mb-0"},"Import new patients automatically.")]),e("div",{class:"form-switch switch-primary d-flex align-items-center gap-3"},[e("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"syncPatients",checked:""}),e("label",{class:"form-check-label line-height-1 fw-medium text-secondary-light",for:"syncPatients"})])],-1),e("div",{class:"d-flex align-items-center justify-content-between mb-16"},[e("div",null,[e("h6",{class:"text-sm fw-semibold mb-4"},"Sync Appointments"),e("p",{class:"text-xs text-secondary-light mb-0"},"Two-way calendar sync.")]),e("div",{class:"form-switch switch-primary d-flex align-items-center gap-3"},[e("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"syncAppts",checked:""}),e("label",{class:"form-check-label line-height-1 fw-medium text-secondary-light",for:"syncAppts"})])],-1),e("div",{class:"d-flex align-items-center justify-content-between"},[e("div",null,[e("h6",{class:"text-sm fw-semibold mb-4"},"Notifications"),e("p",{class:"text-xs text-secondary-light mb-0"},"Alert on sync errors.")]),e("div",{class:"form-switch switch-primary d-flex align-items-center gap-3"},[e("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"notif"}),e("label",{class:"form-check-label line-height-1 fw-medium text-secondary-light",for:"notif"})])],-1)])])):m("",!0)]),e("div",R,[e("button",{type:"button",class:"btn btn-secondary-light px-20 py-10 radius-8",onClick:t[1]||(t[1]=g=>i.$emit("close"))},"Cancel"),e("button",{type:"button",class:"btn btn-primary-600 px-20 py-10 radius-8",onClick:t[2]||(t[2]=(...g)=>u.handleSave&&u.handleSave(...g)),disabled:h.isLoading},[h.isLoading?(l(),c("span",z)):m("",!0),v(" "+r(u.saveButtonText),1)],8,q)])])])])):m("",!0)}const J=k(A,[["render",G]]),W={name:"IntegrationsPage",components:{Breadcrumb:S,IntegrationActionModal:J},setup(){const i=p([{name:"Dentally",type:"PMS",icon:"solar:medical-kit-bold",iconColor:"text-primary-600",cardBg:"bg-gradient-end-1",status:"connected",statusLabel:"Active",lastSync:"2m ago"},{name:"WhatsApp",type:"Messaging",icon:"logos:whatsapp-icon",iconColor:"",cardBg:"bg-gradient-end-6",status:"connected",statusLabel:"Active",lastSync:"Now"},{name:"Google Cal",type:"Calendar",icon:"logos:google-calendar",iconColor:"",cardBg:"bg-gradient-end-3",status:"error",statusLabel:"Error",errorMessage:"Token Expired"},{name:"SOE (Exact)",type:"PMS",icon:"solar:server-square-bold",iconColor:"text-neutral-600",cardBg:"bg-gradient-end-5",status:"disconnected",statusLabel:"Inactive"}]),t=p(!1),s=p({}),o=p("connect");return{integrations:i,getStatusColor:a=>a==="connected"?"text-success-main":a==="error"?"text-danger-main":"text-secondary-light",showModal:t,selectedIntegration:s,activeAction:o,openActionModal:(a,d)=>{s.value=a,o.value=d,t.value=!0},handleModalSave:()=>{if(o.value==="fix"||o.value==="connect"){const a=i.value.findIndex(d=>d.name===s.value.name);a!==-1&&(i.value[a].status="connected",i.value[a].statusLabel="Active",i.value[a].lastSync="Just now",i.value[a].errorMessage=null)}t.value=!1}}}},H={class:"dashboard-main-body"},Q={class:"row row-cols-xxl-4 row-cols-lg-3 row-cols-sm-2 row-cols-1 gy-4"},U={class:"card-body p-20 d-flex flex-column h-100"},X={class:"d-flex flex-wrap align-items-center justify-content-between gap-3"},Y={class:"flex-grow-1"},Z={class:"text-xl mb-1"},ee={class:"fw-medium text-secondary-light mb-0"},te={class:"mt-4 mb-4"},ne={key:0,class:"text-secondary-light text-sm"},se={key:1,class:"text-danger-main text-sm"},oe={class:"mt-auto pt-3 border-top border-neutral-200"},ae=["onClick"],ie=["onClick"],ce=["onClick"];function le(i,t,s,o,h,u){const b=x("Breadcrumb"),a=x("iconify-icon"),d=x("IntegrationActionModal");return l(),c(w,null,[e("div",H,[y(b,{title:"Integrations",breadcrumbs:[{name:"Operations"},{name:"Integrations"}]}),e("div",Q,[(l(!0),c(w,null,M(o.integrations,(n,f)=>(l(),c("div",{class:"col",key:f},[e("div",{class:_(["card shadow-none border h-100",n.cardBg])},[e("div",U,[e("div",X,[e("div",{class:_(["w-40-px h-40-px rounded-circle flex-shrink-0 d-flex justify-content-center align-items-center bg-white shadow-sm text-2xl",n.iconColor])},[y(a,{icon:n.icon},null,8,["icon"])],2),e("div",Y,[e("h6",Z,r(n.name),1),e("p",ee,r(n.type),1)])]),e("div",te,[e("h6",{class:_(["mb-2 text-lg",o.getStatusColor(n.status)])},r(n.statusLabel),3),n.lastSync?(l(),c("span",ne,"Sync: "+r(n.lastSync),1)):m("",!0),n.errorMessage?(l(),c("span",se,r(n.errorMessage),1)):m("",!0)]),e("div",oe,[n.status==="connected"?(l(),c("button",{key:0,onClick:g=>o.openActionModal(n,"configure"),class:"btn w-100 btn-outline-primary-600 radius-8 px-12 py-10 text-sm"}," Configure ",8,ae)):n.status==="error"?(l(),c("button",{key:1,onClick:g=>o.openActionModal(n,"fix"),class:"btn w-100 btn-danger-600 radius-8 px-12 py-10 text-sm"}," Fix Connection ",8,ie)):(l(),c("button",{key:2,onClick:g=>o.openActionModal(n,"connect"),class:"btn w-100 btn-primary-600 radius-8 px-12 py-10 text-sm"}," Connect ",8,ce))])])],2)]))),128))])]),y(d,{isVisible:o.showModal,integration:o.selectedIntegration,actionType:o.activeAction,onClose:t[0]||(t[0]=n=>o.showModal=!1),onSave:o.handleModalSave},null,8,["isVisible","integration","actionType","onSave"])],64)}const de=k(W,[["render",le],["__scopeId","data-v-325981bd"]]);export{de as default};
